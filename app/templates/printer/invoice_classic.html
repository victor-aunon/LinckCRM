<!DOCTYPE html>
<html>
    <head>
        {% block scripts %}
        <style type="text/css">
            /* Define font family along the document */
            @font-face {
                font-family: 'Lato';
                src: url('../static/fonts/Lato-Regular.ttf');
            }
            body {
                font-family: 'Lato',serif,Futura,Helvetica,Segoe,Segoe UI,
                Arial,sans-serif;
                margin: 0;
                padding: 0;
            }
            /* Properties for some HTML elements */
            img {
                text-align: left;
                margin-top: 20px;
                margin-bottom: 20px;
            }

            a {
                color: {{ data.colors.medium }};
            }

            table {
                width: 95%;
                font-size: 1.2em;
                line-height: 2em;
                border-collapse: collapse;
                border-spacing: 0;
                background-color: transparent;
            }

            th {
                padding-left: 10px;
                color: white;
                background-color: {{ data.colors.medium }};
                text-align: left;
            }

            td {
                font-size: 0.8em;
                line-height: 2em;
                padding-right: 0px;
                padding: 8px;
            }

            hr {
                height: 0px;
                width: 100%;
                margin: 0px;
                border-top: 2px solid {{ data.colors.medium }};
            }

            h3 {
                margin: 0px;
                margin-top: 8px;
                color: {{ data.colors.dark }};
            }

            h4 {
                font-size: 1.1em;
                color: {{ data.colors.dark }};
                margin-top: 6px;
                margin-bottom: 2px;
            }

            h5 {
                font-size: 1.1em;
                font-weight: 500;
                margin-top: 6px;
                margin-bottom: 2px;
            }

            p {
                margin-top: 6px;
                font-size: 1em;
            }

            /* Fit the document in an DIN-A4 document */
            #page {
                /* Size greater than A4 because wkhtmltopdf applies an internal margin */
                width: 21cm;
                height: 37cm;
                margin-right: 10%;
                /* border: 1px solid black; */
                position: relative;
            }

            /* header and color strip*/
            .header > div {
                display: inline-block;
                vertical-align: top;
                height: 35px;
            }

            .color-strip {
                width: 10cm;
                background-color: {{ data.colors.dark }};
                /* margin-right: 2cm; */
            }

            /* Date of issue block */
            .date {
                width: 20%;
                margin-bottom: 0px;
                margin-top: 16px;
                margin-left: 5%;
            }

            .date > h5, .date > h4 {
                margin: 0px;
            }

            /* Customer name and vendor logo block */
            .customer-name-vendor-logo > div {
                width: 47%;
                margin-right: 2%;
                height: 150px;
                display: inline-block;
                vertical-align: top;
            }

            /* Customer and vendor info */
            .customer-vendor-info > div {
                width: 47%;
                margin-right: 2%;
                display: inline-block;
                vertical-align: top;
            }

            .company-info-container > div {
                width: 48%;
                margin-right: 1%;
                display: inline-block;
                vertical-align: top;
            }

            #invoice-to {
                margin-top: -8px;
                margin-bottom: 8px;
            }

            #customer-name {
                font-size: 2.2em;
                line-height: 1em;
                word-wrap: break-word;
                height: 2em;
                color: {{ data.colors.darkest }};
            }

            /* Invoice table header */
            .invoice-ref-date > div {
                display: inline-block;
                vertical-align: top;
                padding-bottom: 2px;
            }

            .invoice-text {
                min-width: 42%;
            }

            .invoice-ref {
                min-width: 15%;
                display: flex;
            }

            #invoice-text-title {
                font-size: 5em;
                line-height: 1em;
                color: {{ data.colors.medium }};
                margin-bottom: 0px;
            }

            #invoice-ref {
                font-size: 1.5em;
                font-style: italic;
                margin-right: 5px;
                padding-top: 2.25em;
                color: {{ data.colors.light }};
                margin-bottom: 0px;
            }

            /* Define some class and id properties */
            .top-padded {
                padding-left: 1px;
                padding-top: 10px;
                line-height: 1em;
            }

            .no-padded {
                padding: 0px;
            }

            .no-margin {
                margin: 0px;
            }

            /* Tables */
            /* Color the odd rows of the table */
            .table-striped > tbody > tr:nth-child(odd) {
                background-color: {{ data.colors.lightest }};
            }

            /* Change table properties */
            .table {
                margin-left: 47%;
                width: 48%;
                margin-bottom: 10px;
            }
            .table > tbody > tr > td {
                border-width: 0px;
                padding-left: 10px;
            }
            .table
            .total-col {
                padding-right: 30px;
            }

            .total-col {
                text-align: right;
                padding-right: 30px;
            }

            .total-col-header {
                text-align: right;
                padding-right: 50px;
            }

            .description-col-header {
                width: 50%;
                padding-left: 12px;
            }

            .total {
                font-size: 1.3em;
                line-height: 1.8em;
            }

            .amount {
                padding-left: 40px;
            }

            /* Payment block */
            .invoice-payment > div {
                display: inline-block;
                vertical-align: top;
                margin-bottom: 5px;
            }

            .payment-method {
                width: 40%;
                margin-left: 3%;
            }

            .payment-date {
                width: 20%;
                margin-left: 3%;
            }

            /* Fit and justify the notes block of the invoice */
            .notes {
                text-align: justify;
                width: 95%;
            }

            /* Anchor the footer div at the bottom of the document */
            .footer {
                position: absolute;
                bottom: 35px;
                width: 100%;
            }

            .ecomessage-page > div {
                display: inline-block;
                vertical-align: top;
            }

            .ecofriendly {
                color: green;
                width: 80%;
                margin-right: 5%;
                padding: 0px;
                font-size: 0.8em;
            }

            .footer-strip {
                position: absolute;
                bottom: 0px;
                height: 35px;
                background-color: {{ data.colors.dark }};
            }

            .thanks {
                color: {{ data.colors.medium }};
            }
        </style>
        {% endblock %}
        <meta charset="utf-8">
    </head>
    <body>
        {% block content %}
        <div id="page">
            <div class="header">
                <div class="color-strip">
                </div>
                {% if page == 1 %}
                    <div class="date">
                        <h4><strong>{{ texts.date }}:</strong></h4>
                    </div>
                    <div class="date">
                        <h5><strong>{{ data.invoice.date }}</strong></h5>
                    </div>
                {% endif %}
            </div>
            {% if page == 1 %}
                <div class="customer-name-vendor-logo">
                    <div>
                        <p id="invoice-to"><strong>{{ texts.invoice_to }}</strong> {{ data.customer.identifier }}</p>
                        <p id="customer-name"><strong>{{ data.customer.name }}</strong></p>
                    </div>
                    <div>
                        <img src="{{ data.vendor.logo_url }}" alt="" height="100px">
                    </div>
                </div>
                <div class="customer-vendor-info">
                    <div class="company-info-container">
                        <div class="top-padded">
                            <p style="padding-top: 2px;">{{ data.customer.address }}</p>
                            <p style="padding-top: 2px;">{{ data.customer.city }}, {{ data.customer.postal_code }}</p>
                            <p style="padding-top: 2px;">{{ data.customer.province }}</p>
                        </div>
                        <div class="top-padded">
                            <p><img class="no-margin" src="../static/icons/id-card.png" width="13px"> {{ data.customer.CIF }}</p>
                            <p><img class="no-margin" src="../static/icons/phone-alt-solid.png" height="13px" width="13px"> {{ data.customer.phone }}</p>
                            <p>
                                <img class="no-margin" src="../static/icons/envelope.png" height="13px" width="13px">
                                <a href="mailto:{{ data.customer.email }}" style="overflow-wrap: break-word;">
                                {{ data.customer.email }}</a>
                            </p>
                        </div>
                    </div>
                    <div class="company-info-container">
                        <div class="top-padded">
                            <p style="padding-top: 2px;">{{ data.vendor.address }}</p>
                            <p style="padding-top: 2px;">{{ data.vendor.city }}, {{ data.vendor.postal_code }}</p>
                            <p style="padding-top: 2px;">{{ data.vendor.province }}</p>
                        </div>
                        <div class="top-padded">
                            <p><img class="no-margin" src="../static/icons/id-card.png" height="13px"> {{ data.vendor.CIF }}</p>
                            <p><img class="no-margin" src="../static/icons/phone-alt-solid.png" height="13px"> {{ data.vendor.phone }}</p>
                            <p>
                                <img class="no-margin" src="../static/icons/envelope.png" height="13px">
                                <a href="mailto:{{ data.vendor.email }}" style="overflow-wrap: break-word;">
                                {{ data.vendor.email }}</a>
                            </p>
                        </div>
                    </div>
                </div>
            {% endif %}
            <div class="invoice-ref-date">
                <div class="invoice-text top-padded">
                    <p id="invoice-text-title"><strong>{{ texts.invoice }}</strong></p>
                </div>
                <div class="invoice-ref top-padded">
                    <p id="invoice-ref">#<strong>{{ data.invoice.identifier }}</strong></p>
                </div>
                <div class="no-padded">
                    <h3>{{ texts.period }}</h3>
                    <h5>{{ texts.period_from }} <strong>{{ data.invoice.starting_date }}</strong></h5>
                    <h5>{{ texts.period_to }} <strong>{{ data.invoice.ending_date }}</strong></h5>
                </div>
            </div>
            <div class="top-padded">
                {% if products|length != 0 %}
                    <table class="table-striped">
                        <tr>
                            <th class="description-col-header">{{ texts.table_description }}</th>
                            <th>{{ texts.table_unit_cost }}</th>
                            <th>{{ texts.table_quantity }}</th>
                            <th class="total-col-header">{{ texts.table_amount }}</th>
                        </tr>
                        {% for k,p in products.items() %}
                            <tr>
                                <td>{{ p.description }}</td>
                                <td>{{ p.price_per_unit | currency_format }} €</td>
                                <td class="amount">{{ p.amount }}</td>
                                <td class="total-col">{{ (p.price_per_unit * p.amount) | currency_format }} €</td>
                            </tr>
                        {% endfor %}
                    </table>
                {% endif %}
            </div>
            {% if page == last %}
                <div>
                    <hr size="100%"/>
                    <table class="table">
                        <tr>
                            <td>{{ texts.subtotal }}</td>
                            <td class="total-col"><strong>{{ data.invoice.subtotal | currency_format }} €</strong></td>
                        </tr>
                        <tr>
                            <td>{{ texts.taxes }}</td>
                            <td class="total-col"><strong>{{ data.invoice.taxes | currency_format }} €</strong></td>
                        </tr>
                        {% if data.invoice.discount != 0.0 %}
                            <tr>
                                <td>{{ texts.discount }}</td>
                                <td class="total-col"><strong>{{ data.invoice.discount | currency_format }} €</strong></td>
                            </tr>
                        {% endif %}
                        <tr class="total">
                            <th>{{ texts.total }}</th>
                            <th class="total-col"><strong>{{ data.invoice.total | currency_format }} €</strong></th>
                        </tr>
                    </table>
                </div>
                <div>
                    <hr size="100%"/>
                </div>
                <div class="invoice-payment">
                    <div> 
                        <h4><strong>{{ texts.payment_method }}:</strong></h4>
                    </div>
                    <div class="payment-method"> 
                        <h5>{{ data.invoice.payment_method }}</h5>
                    </div>
                    <div> 
                        <h4><strong>{{ texts.expiration }}:</strong></h4>
                    </div>
                    <div class="payment-date"> 
                        <h5><strong>{{ data.invoice.expiration }}</strong></h5>
                    </div>
                </div>
                <div>
                    <hr size="100%"/>
                </div>
                <div>
                    <div>
                        <h4><strong>{{ texts.notes }}:</strong></h4>
                    </div>
                    <div class="notes">
                        <p class="notes">{{ data.invoice.notes }}</p>
                    </div>
                </div>
            {% endif %}
            <div class="footer">
                {% if page == last %}
                    <div class="thanks">
                        <h2>{{ texts.acknowledgments }}</h2>
                    </div>
                {% endif %}
                <div class="ecomessage-page">
                    <div class="ecofriendly">
                        {{ texts.ecomessage }}
                    </div>
                    <div>
                        {{ texts.pages }}
                    </div>
                </div>
            </div>
            <div class="footer-strip color-strip">
            </div>
        </div>
        {% endblock %}
    </body>
</html>
